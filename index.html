<!DOCTYPE html>
<html lang="ru" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Intellectual Journal</title>

  <!-- –®—Ä–∏—Ñ—Ç -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">

  <!-- –ò–∫–æ–Ω–∫–∏ -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <!-- –°—Ç–∏–ª–∏ -->
  <link rel="stylesheet" href="dashboard.css" />
  <link rel="stylesheet" href="objects.css" />
  <link rel="stylesheet" href="themes.css" />

  <style>
    body { font-family: 'Montserrat', sans-serif; }
    .btn, .filters button { border: none; transition: background-color 0.3s ease; }
    .theme-toggle { background: none; border: none; font-size: 18px; cursor: pointer; margin-left: auto; }
    .header { display: flex; justify-content: space-between; align-items: center; }

    /* SPA —Ç–∞–±—ã */
    .tab-content { display: none; }
    .tab-content.active { display: block; }
    .sidebar li { cursor: pointer; }
  </style>
</head>
<body>
  <div class="app-container">
    <!-- –°–∞–π–¥–±–∞—Ä -->
    <aside class="sidebar">
      <h2>Intellectual Journal</h2>
      <ul>
        <li data-target="dashboard" class="active"><i class="fas fa-tachometer-alt"></i> –î–∞—à–±–æ—Ä–¥</li>
        <li data-target="objects"><i class="fas fa-building"></i> –û–±—ä–µ–∫—Ç—ã</li>
        <li data-target="photos"><i class="fas fa-camera"></i> –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏</li>
        <li data-target="journals"><i class="fas fa-book"></i> –ñ—É—Ä–Ω–∞–ª—ã</li>
      </ul>
    </aside>

    <!-- –û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å -->
    <main class="main">
      <!-- üîµ –ö–æ–Ω—Ç–µ–Ω—Ç –î–∞—à–±–æ—Ä–¥–∞ -->
      <div id="dashboard" class="tab-content active">
        <header class="header">
          <h1>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –æ–±—ä–µ–∫—Ç–∞–º</h1>
          <button id="dashboardThemeToggle" class="theme-toggle" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">üåó</button>
        </header>

        <!-- –§–∏–ª—å—Ç—Ä—ã -->
        <div class="filters">
          <select id="dashboardDistrictFilter" class="filter-okrug">
            <option value="">–û–∫—Ä—É–≥</option>
            <option value="–°–ê–û">–°–ê–û</option>
            <option value="–°–í–ê–û">–°–í–ê–û</option>
          </select>
          <select id="dashboardFilterArea" style="width:120px; font-size: 13px;">
            <option value="">–†–∞–π–æ–Ω</option>
          </select>
          <select id="dashboardTypeFilter" class="filter-type">
            <option value="">–¢–∏–ø –æ–±—ä–µ–∫—Ç–∞</option>
            <option value="–î–≤–æ—Ä–æ–≤–∞—è —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è">–î–≤–æ—Ä–æ–≤–∞—è —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è</option>
          </select>
          <select id="dashboardFilterCustomer"><option>–ó–∞–∫–∞–∑—á–∏–∫</option></select>
          <select id="dashboardFilterContractor"><option>–ü–æ–¥—Ä—è–¥—á–∏–∫</option></select>
          <select id="dashboardStatusObject"><option>–°—Ç–∞—Ç—É—Å –æ–±—ä–µ–∫—Ç–∞</option></select>
          <select id="dashboardStatusCheck"><option>–°—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–∫–∏</option></select>
          <select id="dashboardYear"><option>–ì–æ–¥ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è</option></select>
          <input type="text" id="dashboardDateStart" placeholder="–ù–∞—á–∞–ª–æ –ø–µ—Ä–∏–æ–¥–∞" class="filter-date-start" />
          <input type="text" id="dashboardDateEnd" placeholder="–ö–æ–Ω–µ—Ü –ø–µ—Ä–∏–æ–¥–∞" class="filter-date-end" />
        </div>

        <section class="dashboard-body">
          <div class="kpi-cards">
            <div class="kpi-card">
              <h3>–û–±—ä–µ–∫—Ç–æ–≤ –≤—Å–µ–≥–æ</h3>
              <p id="dashboardTotalObjects">-</p>
            </div>
            <div class="kpi-card">
              <h3>% –í—ã–ø–æ–ª–Ω–µ–Ω–∏—è</h3>
              <p id="dashboardAvgProgress">-</p>
            </div>
          </div>

          <div class="chart-section triple-charts">
            <div class="chart-card">
              <h3>–°—Ç–∞—Ç—É—Å—ã –æ–±—ä–µ–∫—Ç–æ–≤</h3>
              <div id="dashboardPieStatusObject" style="height: 300px;"></div>
            </div>
            <div class="chart-card">
              <h3>–°—Ç–∞—Ç—É—Å—ã –ø—Ä–æ–≤–µ—Ä–æ–∫</h3>
              <div id="dashboardPieStatusCheck" style="height: 300px;"></div>
            </div>
            <div class="chart-card">
              <h3>–û–±—ä–µ–∫—Ç—ã –ø–æ –æ–∫—Ä—É–≥–∞–º</h3>
              <div id="dashboardPieByDistrict" style="height: 300px;"></div>
            </div>
          </div>

          <div class="chart-section">
            <h3>–ì—Ä–∞—Ñ–∏–∫ –ì–∞–Ω—Ç–∞ –æ–±—ä–µ–∫—Ç–æ–≤</h3>
            <div id="dashboardGanttChart" style="height: 400px;"></div>
          </div>

          <div class="chart-section">
            <h3>–ö–∞—Ä—Ç–∞ –æ–±—ä–µ–∫—Ç–æ–≤</h3>
            <div id="dashboardMap" style="height: 400px;"></div>
          </div>

          <div class="kpi-container">
            <div class="kpi-card">
              <div class="kpi-title">–°—Ä–µ–¥–Ω–∏–π % –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏</div>
              <div class="kpi-value" id="dashboardMetricReady">-</div>
            </div>
            <div class="kpi-card">
              <div class="kpi-title">–ü—Ä–æ–≤–µ—Ä–æ–∫</div>
              <div class="kpi-value" id="dashboardMetricChecks">-</div>
            </div>
            <div class="kpi-card">
              <div class="kpi-title">–ù–∞—Ä—É—à–µ–Ω–∏–π</div>
              <div class="kpi-value" id="dashboardMetricViolations">-</div>
            </div>
            <div class="kpi-card">
              <div class="kpi-title">–§–æ—Ç–æ—Ñ–∏–∫—Å–∞—Ü–∏–π</div>
              <div class="kpi-value" id="dashboardMetricPhotos">-</div>
            </div>
          </div>

          <div class="chart-section">
            <h3>–î–∏–Ω–∞–º–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –ø–æ –≥–æ–¥–∞–º</h3>
            <div id="dashboardYearDynamics" style="height: 300px;"></div>
          </div>

          <div class="rating-section">
            <div class="rating-block">
              <h4>–¢–æ–ø-5 –æ–±—ä–µ–∫—Ç–æ–≤ —Å –Ω–∞—Ä—É—à–µ–Ω–∏—è–º–∏</h4>
              <ul id="dashboardTopObjects"></ul>
            </div>
            <div class="rating-block">
              <h4>–¢–æ–ø-5 –≤–∏–¥–æ–≤ —Ä–∞–±–æ—Ç —Å –Ω–∞—Ä—É—à–µ–Ω–∏—è–º–∏</h4>
              <ul id="dashboardTopContractors"></ul>
            </div>
          </div>
        </section>
      </div>

      <!-- üü¢ –ö–æ–Ω—Ç–µ–Ω—Ç –û–±—ä–µ–∫—Ç–æ–≤ -->
      <div id="objects" class="tab-content">
        <header class="header">
          <h1>–°—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã</h1>
          <button id="objectsThemeToggle" class="theme-toggle" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">üåó</button>
        </header>

        <div class="filters">
          <input type="text" id="objectsSearchInput" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ –∞–¥—Ä–µ—Å—É" />
          <select id="objectsDistrictFilter" class="filter-okrug">
            <option value="">–û–∫—Ä—É–≥</option>
            <option value="–°–ê–û">–°–ê–û</option>
            <option value="–°–í–ê–û">–°–í–ê–û</option>
          </select>
          <select id="objectsTypeFilter" class="filter-type">
            <option value="">–¢–∏–ø –æ–±—ä–µ–∫—Ç–∞</option>
            <option value="–î–≤–æ—Ä–æ–≤–∞—è —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è">–î–≤–æ—Ä–æ–≤–∞—è —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è</option>
          </select>
          <input type="text" id="objectsDateStart" placeholder="–ù–∞—á–∞–ª–æ –ø–µ—Ä–∏–æ–¥–∞" class="filter-date-start" />
          <input type="text" id="objectsDateEnd" placeholder="–ö–æ–Ω–µ—Ü –ø–µ—Ä–∏–æ–¥–∞" class="filter-date-end" />
          <input type="text" id="objectsFioFilter" placeholder="–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π" class="filter-fio" />
          <input type="text" id="objectsViolationFilter" placeholder="–ù–∞—Ä—É—à–µ–Ω–∏—è" class="filter-violation" />
        </div>

        <div class="cards-container" id="objectsList"></div>

        <!-- –ú–æ–¥–∞–ª–∫–∞ —á–∞—Ç–æ–≤ -->
        <div id="objectsChatModal" class="chat-modal">
          <div class="chat-box">
            <div class="chat-box-header">
              <h3 id="objectsChatTitle">–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç</h3>
              <span class="chat-close">&times;</span>
            </div>
            <div class="chat-select" id="objectsChatSelect">
              <button class="chat-option" data-chat="–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ —Ä–∞–±–æ—Ç">–ß–∞—Ç ‚Ññ1 –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ —Ä–∞–±–æ—Ç</button>
              <button class="chat-option" data-chat="–í—Ö–æ–¥–Ω–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—å">–ß–∞—Ç ‚Ññ2 –í—Ö–æ–¥–Ω–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—å</button>
              <button class="chat-option" data-chat="–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ –∏—Å–ø—ã—Ç–∞–Ω–∏—è">–ß–∞—Ç ‚Ññ3 –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ –∏—Å–ø—ã—Ç–∞–Ω–∏—è</button>
              <button class="chat-option" data-chat="–§–∏–∫—Å–∞—Ü–∏—è –Ω–∞—Ä—É—à–µ–Ω–∏–π">–ß–∞—Ç ‚Ññ4 –§–∏–∫—Å–∞—Ü–∏—è –Ω–∞—Ä—É—à–µ–Ω–∏–π</button>
            </div>
            <div class="chat-box-body" id="objectsChatBody" style="display:none;">
              <p>–°–æ–æ–±—â–µ–Ω–∏—è –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —á–∞—Ç—É –±—É–¥—É—Ç –∑–¥–µ—Å—å.</p>
            </div>
            <div class="chat-box-input" id="objectsChatInput" style="display:none;">
              <input type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." />
            </div>
            <button id="objectsChatBackBtn" style="display:none;">‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</button>
          </div>
        </div>

        <!-- –ú–æ–¥–∞–ª–∫–∞ –¥–∏–∞–≥—Ä–∞–º–º—ã –ì–∞–Ω—Ç–∞ -->
        <div id="objectsGantModal" class="chat-modal">
          <div class="chat-box" style="width: 1300px; height: 700px;">
            <div class="chat-box-header">
              <h3>–î–∏–∞–≥—Ä–∞–º–º–∞ –ì–∞–Ω—Ç–∞ ‚Äî –ü—É—Ç–µ–≤–æ–π –ø—Ä. 38</h3>
              <span class="chat-close gant-close">&times;</span>
            </div>
            <div class="chat-box-body" style="overflow-x: auto; width: 100%; padding: 20px; box-sizing: border-box;">
              <div id="objectsGantChart" style="min-width: 1500px; min-height: 400px;"></div>
              <div id="objectsGantLegend" style="margin-top: 10px; display: flex; justify-content: center; gap: 20px; font-size: 14px;">
                <div style="display:flex; align-items:center;">
                  <span style="display:inline-block;width:20px;height:10px;background:#1e3a8a;margin-right:6px;"></span>
                  –°–¥–µ–ª–∞–Ω–æ
                </div>
                <div style="display:flex; align-items:center;">
                  <span style="display:inline-block;width:20px;height:10px;background:#60a5fa;margin-right:6px;"></span>
                  –û—Å—Ç–∞–ª–æ—Å—å
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- –ú–æ–¥–∞–ª–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ -->
        <div id="objectsDocumentModal" class="chat-modal">
          <div class="chat-box" style="width: 1100px; max-height: 70vh; display: flex; flex-direction: column;">
            <div class="chat-box-header">
              <h3>–î–æ–∫—É–º–µ–Ω—Ç—ã –ø–æ –æ–±—ä–µ–∫—Ç—É</h3>
              <span class="chat-close document-close">&times;</span>
            </div>
            <div class="chat-box-body" style="flex: 1; overflow-y: auto; padding: 0;">
              <table class="doc-table">
                <thead>
                  <tr>
                    <th>–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</th>
                    <th>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞</th>
                    <th>–î–∞—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏</th>
                    <th>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</th>
                  </tr>
                </thead>
                <tbody id="objectsDocumentTableBody"></tbody>
              </table>
            </div>
            <div style="padding: 12px 16px; display: flex; justify-content: flex-end; background: var(--input-bg);">
              <button id="objectsSaveDocumentsBtn" class="btn-accent">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
          </div>
        </div>
      </div>

      <!-- üü£ –ó–∞–≥–ª—É—à–∫–∏ -->
      <div id="photos" class="tab-content"><h2>–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏</h2></div>
      <div id="journals" class="tab-content"><h2>–ñ—É—Ä–Ω–∞–ª—ã</h2></div>
    </main>
  </div>

  <!-- –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫ -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const tabs = document.querySelectorAll('.sidebar li');
      const contents = document.querySelectorAll('.tab-content');
      tabs.forEach(tab => {
        tab.addEventListener('click', () => {
          tabs.forEach(t => t.classList.remove('active'));
          contents.forEach(c => c.classList.remove('active'));
          tab.classList.add('active');
          document.getElementById(tab.dataset.target).classList.add('active');
        });
      });
    });
  </script>

  <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º JS -->
  <script src="dashboard.js" defer></script>
  <script src="objects.js" defer></script>
</body>
</html>
